<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vercel API æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-item { margin: 15px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .result { margin-top: 10px; padding: 10px; background: #f5f5f5; border-radius: 3px; }
        .success { border-color: green; background: #e8f5e8; }
        .error { border-color: red; background: #ffe8e8; }
        button { padding: 8px 16px; margin: 5px; background: #007cba; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #005a8a; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Vercel API æµ‹è¯•</h1>
    <p>æµ‹è¯•æ–°éƒ¨ç½²çš„ Vercel API æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
    
    <div class="test-item">
        <h3>1. è´§å¸è½¬æ¢æµ‹è¯•</h3>
        <button onclick="testCurrency()">æµ‹è¯•è´§å¸è½¬æ¢ (1 USD â†’ CNY)</button>
        <div id="currency-result" class="result"></div>
    </div>
    
    <div class="test-item">
        <h3>2. é‡é‡è½¬æ¢æµ‹è¯•</h3>
        <button onclick="testWeight()">æµ‹è¯•é‡é‡è½¬æ¢ (1 kg â†’ g)</button>
        <div id="weight-result" class="result"></div>
    </div>
    
    <div class="test-item">
        <h3>3. ä½“ç§¯è½¬æ¢æµ‹è¯•</h3>
        <button onclick="testVolume()">æµ‹è¯•ä½“ç§¯è½¬æ¢ (1 l â†’ ml)</button>
        <div id="volume-result" class="result"></div>
    </div>
    
    <div class="test-item">
        <h3>4. é•¿åº¦è½¬æ¢æµ‹è¯•</h3>
        <button onclick="testLength()">æµ‹è¯•é•¿åº¦è½¬æ¢ (1 m â†’ cm)</button>
        <div id="length-result" class="result"></div>
    </div>
    
    <div class="test-item">
        <h3>5. æ¸©åº¦è½¬æ¢æµ‹è¯•</h3>
        <button onclick="testTemperature()">æµ‹è¯•æ¸©åº¦è½¬æ¢ (0Â°C â†’ Â°F)</button>
        <div id="temperature-result" class="result"></div>
    </div>
    
    <div class="test-item">
        <h3>6. æ—¶åŒºè½¬æ¢æµ‹è¯•</h3>
        <button onclick="testTimezone()">æµ‹è¯•æ—¶åŒºè½¬æ¢ (Beijing â†’ New York)</button>
        <div id="timezone-result" class="result"></div>
    </div>
    
    <div class="test-item">
        <h3>ğŸ”„ å…¨éƒ¨æµ‹è¯•</h3>
        <button onclick="testAll()" style="background: #dc3545;">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <div id="all-result" class="result"></div>
    </div>

    <script>
        const API_BASE = 'https://converter-tools-backend.vercel.app';
        
        async function apiCall(endpoint, data) {
            try {
                console.log(`è°ƒç”¨ API: ${API_BASE}${endpoint}`, data);
                const response = await fetch(`${API_BASE}${endpoint}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                console.log(`å“åº”çŠ¶æ€: ${response.status}`);
                const result = await response.json();
                console.log('å“åº”æ•°æ®:', result);
                return result;
            } catch (error) {
                console.error('APIè°ƒç”¨å¤±è´¥:', error);
                throw error;
            }
        }
        
        function showResult(elementId, success, message, data = null) {
            const element = document.getElementById(elementId);
            element.className = `result ${success ? 'success' : 'error'}`;
            element.innerHTML = `
                <strong>${success ? 'âœ… æˆåŠŸ' : 'âŒ å¤±è´¥'}</strong><br>
                ${message}
                ${data ? `<br><pre>${JSON.stringify(data, null, 2)}</pre>` : ''}
            `;
        }
        
        async function testCurrency() {
            try {
                const result = await apiCall('/api/convert/currency', {
                    amount: 1,
                    from: 'USD',
                    to: 'CNY'
                });
                showResult('currency-result', true, `1 USD = ${result.result} CNY`, result);
            } catch (error) {
                showResult('currency-result', false, `é”™è¯¯: ${error.message}`);
            }
        }
        
        async function testWeight() {
            try {
                const result = await apiCall('/api/convert/weight', {
                    amount: 1,
                    from: 'kg',
                    to: 'g'
                });
                showResult('weight-result', true, `1 kg = ${result.result} g`, result);
            } catch (error) {
                showResult('weight-result', false, `é”™è¯¯: ${error.message}`);
            }
        }
        
        async function testVolume() {
            try {
                const result = await apiCall('/api/convert/volume', {
                    amount: 1,
                    from: 'l',
                    to: 'ml'
                });
                showResult('volume-result', true, `1 l = ${result.result} ml`, result);
            } catch (error) {
                showResult('volume-result', false, `é”™è¯¯: ${error.message}`);
            }
        }
        
        async function testLength() {
            try {
                const result = await apiCall('/api/convert/length', {
                    amount: 1,
                    from: 'm',
                    to: 'cm'
                });
                showResult('length-result', true, `1 m = ${result.result} cm`, result);
            } catch (error) {
                showResult('length-result', false, `é”™è¯¯: ${error.message}`);
            }
        }
        
        async function testTemperature() {
            try {
                const result = await apiCall('/api/convert/temperature', {
                    amount: 0,
                    from: 'c',
                    to: 'f'
                });
                showResult('temperature-result', true, `0Â°C = ${result.result}Â°F`, result);
            } catch (error) {
                showResult('temperature-result', false, `é”™è¯¯: ${error.message}`);
            }
        }
        
        async function testTimezone() {
            try {
                const result = await apiCall('/api/convert/timezone', {
                    datetime: '2024-01-01 12:00:00',
                    fromTz: 'Asia/Shanghai',
                    toTz: 'America/New_York'
                });
                showResult('timezone-result', true, `åŒ—äº¬æ—¶é—´è½¬æ¢æˆåŠŸ`, result);
            } catch (error) {
                showResult('timezone-result', false, `é”™è¯¯: ${error.message}`);
            }
        }
        
        async function testAll() {
            document.getElementById('all-result').innerHTML = 'ğŸ”„ æ­£åœ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•...';
            
            const tests = [
                testCurrency,
                testWeight, 
                testVolume,
                testLength,
                testTemperature,
                testTimezone
            ];
            
            let successCount = 0;
            for (const test of tests) {
                try {
                    await test();
                    successCount++;
                } catch (error) {
                    console.error('æµ‹è¯•å¤±è´¥:', error);
                }
                await new Promise(resolve => setTimeout(resolve, 500)); // ç­‰å¾…0.5ç§’
            }
            
            showResult('all-result', successCount === tests.length, 
                      `å®Œæˆï¼${successCount}/${tests.length} ä¸ªæµ‹è¯•é€šè¿‡`);
        }
    </script>
</body>
</html> 